<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Command Dispatch</title>
    <link href="hjb_v1.css" type="text/css" rel="stylesheet">
    </link>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    </meta>
<meta content="Docutils 0.3.7: http://docutils.sourceforge.net/" name="generator">
</meta>
  </head>
  <body align="center">
    <div class="outer-body">
    <div class="hjb-title">
      <h2 class="hjb-title">HJB (HTTP JMS Bridge)</h2>
     </div>
   <div class="navigation-bar">
     <table align="center" class="navigation-bar">
       <tbody>
	 <tr>
	   <td>
	   <a href="index.html">Home</a></td>
	   <td>
	   <a href="download.html">Download</a></td>
	   <td>
	   <a href="doc.html">Documentation</a></td>
	   <td>
	   <a href="detailed-design.html">Design</a></td>
	   <td>
	   <a href="mailto:users@hjb.tigris.org">Support</a></td>
	 </tr>
       </tbody>
     </table>
   </div>
   
   <div>
    
     <div class="inner-body">
      <h2>Command Dispatch</h2>
      <div class="section" id="jms-commands">
<h2>
<a name="jms-commands">JMS Commands</a></h2>
<p>The JMS API defines several interfaces and classes.  These types
contain various methods, each of which specifies it own set of
arguments. JMS vendors typically implement most of this API, though
it has optional parts that vendors are not obliged to support.</p>
<p>These methods sometimes have particular constaints on how they are
used at runtime.  Some JMS methods imply specific timing constraints,
others must be run on specific threads at specific points in their
lifecycle.</p>
<p>HJB attempts to support as much of the non-optional JMS API as
possible.  To allow the methods in the JMS API to be invoked via HTTP
in a uniform fashion, and to support additional runtime constraints on
some of the API methods, HJB decouples invocation of the JMS API
methods from the processing of the HTTP request using <em>JMSCommands</em>.</p>
<p>JMS Commands</p>
<ul class="simple">
<li>uniquely map to specific URL patterns recognised by the HJB servlet.</li>
<li>are constructed with references to all the JMS objects and
invocation parameters necessary to complete their execution.</li>
<li>are constructed by one of the <a href="#jms-command-generators" class="reference">JMS Command Generators</a>.</li>
<li>capture any exceptions that occur during execution and retain them as
faults.</li>
<li>once executed, provide a status message describing the result of the
command execution.</li>
<li>once executed, provide access to objects that may need to be returned
in the HTTP response, e.g, a received message, or a  retained fault.</li>
<li>are scheduled for execution on specific threads.</li>
<li>are queued on their execution threads, so that only one command is
in execution at any time. (This resolves the threading constraint
required of JMS Sessions once message processing begins as described
in <a href="#jmsspec" id="id1" name="id1" class="citation-reference">[JMSSpec]</a>).</li>
<li>are inspired by the Command Pattern (cf <a href="#designpatterns" id="id2" name="id2" class="citation-reference">[DesignPatterns]</a>).</li>
</ul>
</div>
<div class="section" id="jms-command-generators">
<h2>
<a name="jms-command-generators">JMS Command Generators</a></h2>
<p>If <a href="#jms-commands" class="reference">JMS Commands</a> are the JMS-facing part of the processing of a HTTP
request by HJB, then <em>JMS Command Generators</em> are the HTTP-facing
portion.</p>
<p>There is a one-one relationship between JMS Commands and JMS Command
Generators. Each Generator is tightly coupled to the corresponding JMS
command and</p>
<ul class="simple">
<li>determines whether a specified URL is a match for its associated JMS
Command.</li>
<li>constructs a JMS Command; it<ul>
<li>finds any JMS objects it references.</li>
<li>collects any command invocation parameters from the HTTP request.</li>
<li>uses the JMS objects and invocation parameters to
create a new JMSCommand instance.</li>
</ul>
</li>
<li>determines the thread on which the command should be executed.</li>
<li>once the JMS Command is executed, is used to construct the HTTP
response containing the status and result of the executed command.</li>
</ul>
</div>
<div class="section" id="hjbservlet-and-command-dispatch">
<h2>
<a name="hjbservlet-and-command-dispatch">HJBServlet and Command Dispatch</a></h2>
<p>The HJBServlet ties JMS Command Generators and their commands
together. It</p>
<ul class="simple">
<li>maintains a list of JMS Command Generators for each HTTP request
method that HJB can conceivably give a response to.</li>
<li>on receiving a HTTP request on a given URL for a given method, it
determines if there is a generator matching that URL.<ul>
<li>if there is none, it returns <em>404 NOT FOUND</em> in the HTTP response.</li>
</ul>
</li>
<li>on finding a matching Generator, it uses it to generate the JMS
Command, then schedules the Command for execution on its specific
execution thread.</li>
<li>once execution is complete, it uses the Command Generator to send a
response based on the final state of the Command.</li>
</ul>
<table rules="none" frame="void" class="docutils citation" id="jmsspec">
<colgroup>
<col class="label">
</col>
<col>
</col>
</colgroup>
<tbody valign="top">
<tr>
<td class="label">
<a href="#id1" class="fn-backref" name="jmsspec">[JMSSpec]</a></td><td><a href="http://java.sun.com/products/jms/docs.html" class="reference">Java Message Service specification 1.1</a></td></tr>
</tbody>
</table>
<table rules="none" frame="void" class="docutils citation" id="designpatterns">
<colgroup>
<col class="label">
</col>
<col>
</col>
</colgroup>
<tbody valign="top">
<tr>
<td class="label">
<a href="#id2" class="fn-backref" name="designpatterns">[DesignPatterns]</a></td><td><a href="http://en.wikipedia.org/wiki/Design_Patterns" class="reference">Design Patterns</a></td></tr>
</tbody>
</table>
</div>
      <hr class="docutils footer">
      </hr>
<div class="footer">
<a href="command-dispatch.rst" class="reference">View document source</a>.
Generated by <a href="http://docutils.sourceforge.net/" class="reference">Docutils</a> from <a href="http://docutils.sourceforge.net/rst.html" class="reference">reStructuredText</a> source.
</div>
    </div>
  </div>
   </div>
   
  </body>
</html>